<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Módulo de Gráficos y Visualización de datos</title>
    <meta charset="utf-8" />
    <link href="libs/remark-css-0.0.1/ninjutsu.css" rel="stylesheet" />
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Módulo de Gráficos y Visualización de datos

---







# Repasando

&lt;br&gt;

- Empezamos a ver los fundamentos del lenguaje R.

&lt;br&gt;

- Incorporamos la forma de trabajo a través de objetos.

&lt;br&gt;

- Empezamos a importar bases de datos, a procesar la información que hay dentro de ellas

&lt;br&gt;

- Conocimos algunas funciones para transformar sus elementos (variables, categorías, filas, columnas)

---

### Llegamos a un punto importantísimo del curso


&lt;img src="img/curvaR2.png" width="70%" style="display: block; margin: auto;" /&gt;

---
class: middle, center, inverse

# Visualización de datos - Paquete ggplot2

---

### ¿Por qué visualizar?

&lt;br&gt; 

- _"La visualización es el proceso de hacer visibles los contrastes, ritmos y eventos que los datos expresan, que no podemos percibir cuando vienen en forma de áridas listas de números y categorías."_ [^1]

&lt;br&gt;
  
- Interpretar / decodificar la información de forma visual

&lt;br&gt;


[^1]: https://bitsandbricks.github.io/ciencia_de_datos_gente_sociable/visualizacion.html

---
### El paquete ggplot2

&lt;br&gt;

--

- _ggplot2_ es uno de los paquetes principales de _tidyverse_

&lt;br&gt;

--

- Tiene la misma lógica de "capas" y de apilamiento de sentencias, como venimos haciendo con el comando __%&gt;%__, pero ahora lo haremos con el símbolo __+__

--

- Necesitamos estructurar los datos de forma "vertical" (¿pivot_longer suena familiar?), es decir, una columna por cada dimensión (variable) y una fila por cada observación. Estructurar bien los datos ahorra muchos dolores de cabeza.

  
---
### Manos a la obra

&lt;br&gt;

Queremos analizar de forma descriptiva una o más variables. Intentemos con las herramientas que aprendimos hasta el momento.
  
&lt;br&gt;

--

Si queremos, por ejemplo, ver cómo se comporta el ingreso de la población, podemos empezar con el __ingreso de la ocupación princial__ de los individuos.
  
  
Busquemos la variable en el diseño de registro:

&lt;img src="img/dis_reg_p21.png" width="80%" style="display: block; margin: auto;" /&gt;

---
### Librerías

&lt;br&gt;

* Cargamos las librerías necesarias 


```r
library(tidyverse)
library(questionr) # funciones para facilitar trabajo con encuestas
library(eph)
library(ggthemes)  # funciones para tunear gráficos
library(GGally)
```

&lt;br&gt;

* Descargamos una base de la EPH del año 2018 con la función del paquete _eph_

```r
base &lt;- get_microdata(year = 2018,
                      trimester = 1,
                      type = "individual") 
```

---

## El primer paso antes de hacer un gráfico es saber qué quiero mostrar y con qué tipo de datos cuento

--

### Analicemos la variable:

--


```r
class(base$P21)
```

```
  [1] "integer"
```

--


```r
any(is.na(base$P21))
```

```
  [1] FALSE
```

--

```r
summary(base$P21)
```

```
     Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
       -9       0       0    5072    7200  200000
```

---

## Ahora sí, intentemos graficarlo

---




class: split-40
count: false
.column[.content[

```r
*ggplot(data = base)
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g1_1-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
ggplot(data = base) +  
* aes(x = P21,
*     weights = PONDIIO)
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g1_3-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
ggplot(data = base) +  
  aes(x = P21,  
      weights = PONDIIO) +  
* geom_histogram()
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g1_4-1.png" width="100%" /&gt;
]]


---
### Saquemos los valores extremos, para poder analizar mejor gráficamente el resto de la distribución.

&lt;br&gt;


```r
base &lt;- base %&gt;% 
  filter(P21 &gt; 0 &amp; P21 &lt; 50000)
```

--

&lt;br&gt;

Tiramos el summary nuevamente

```r
summary(base$P21)
```

```
     Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
       70    7000   12000   13937   19000   49000
```

---




class: split-40
count: false
.column[.content[

```r
*ggplot(data = base)
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g2_1-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
ggplot(data = base) +  
* aes(x = P21,
*     weights = PONDIIO)
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g2_3-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
ggplot(data = base) +  
  aes(x = P21,  
      weights = PONDIIO) +  
* geom_histogram(fill = "salmon",
*                color = "grey")
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g2_5-1.png" width="100%" /&gt;
]]


---
## Gráficos de Boxplot

### ¿Y si la distribución del ingreso se comporta de manera diferente en función de otra variable?

- Probemos con otro tipo de gráfico que nos deje comparar, en este caso, para los distintos niveles educativos alcanzados

En el diseño de registro esta variable la encontramos como __NIVEL_ED__
&lt;img src="img/dis_reg_nivel_ed.png" width="80%" style="display: block; margin: auto;" /&gt;

---




class: split-40
count: false
.column[.content[

```r
*ggplot(data = base)
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_boxplot_1-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
ggplot(data = base) +  
* aes(x = NIVEL_ED)
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_boxplot_2-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
ggplot(data = base) +  
  aes(x = NIVEL_ED) +  
* aes(y = P21)
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_boxplot_3-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
ggplot(data = base) +  
  aes(x = NIVEL_ED) +  
  aes(y = P21) +  
* geom_boxplot()
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_boxplot_4-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
ggplot(data = base) +  
  aes(x = NIVEL_ED) +  
  aes(y = P21) +  
  geom_boxplot() +  
* aes(group = NIVEL_ED)
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_boxplot_5-1.png" width="100%" /&gt;
]]


---

## Mucho mejor! Pero... ¿Qué pasó con las categorías? ¿Cómo las muestro?

--

- Tal como se descarga la base de la página del INDEC, vemos que la variable __NIVEL_ED__ es de tipo "entero".


```r
class(base$NIVEL_ED)
```

```
  [1] "integer"
```

--


```r
table(base$NIVEL_ED)
```

```
  
     1    2    3    4    5    6    7 
   685 2953 3296 5646 2585 4107   83
```

--

Transformemos, entonces, a _NIVEL_ED_ en una variable de tipo _factor_, asi podremos contar con las etiquetas e, incluso, reordenar sus categorías de forma ordinal
  
---


```r
base &lt;- base %&gt;% 
  mutate(NIVEL_ED = factor(NIVEL_ED,
                           levels = c(7,1:6),
                           labels = c("Sin instruccion", "Primaria incompleta", "Primaria completa",
                                      "Secundaria incompleta", "Secundaria completa",
                                      "Sup. incompleto", "Sup. completo")))
```

Tiramos una frecuencia para chequear el trabajo hecho

```r
table(base$NIVEL_ED)
```

```
  
        Sin instruccion   Primaria incompleta     Primaria completa 
                     83                   685                  2953 
  Secundaria incompleta   Secundaria completa       Sup. incompleto 
                   3296                  5646                  2585 
          Sup. completo 
                   4107
```

---
## Gráficos de Boxplot

### Ahora sí, con etiquetas en la variable, sumemos otros parámetros del gráfico

---





class: split-40
count: false
.column[.content[

```r
*ggplot(data = base)
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g3_1-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
ggplot(data = base) +  
* aes(x = NIVEL_ED)
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g3_2-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
ggplot(data = base) +  
  aes(x = NIVEL_ED) +  
* aes(y = P21)
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g3_3-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
ggplot(data = base) +  
  aes(x = NIVEL_ED) +  
  aes(y = P21) +  
* geom_boxplot()
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g3_4-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
ggplot(data = base) +  
  aes(x = NIVEL_ED) +  
  aes(y = P21) +  
  geom_boxplot() +  
* aes(group = NIVEL_ED)
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g3_5-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
ggplot(data = base) +  
  aes(x = NIVEL_ED) +  
  aes(y = P21) +  
  geom_boxplot() +  
  aes(group = NIVEL_ED) +  
* aes(fill = NIVEL_ED)
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g3_6-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
ggplot(data = base) +  
  aes(x = NIVEL_ED) +  
  aes(y = P21) +  
  geom_boxplot() +  
  aes(group = NIVEL_ED) +  
  aes(fill = NIVEL_ED) +  
* theme_minimal()
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g3_7-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
ggplot(data = base) +  
  aes(x = NIVEL_ED) +  
  aes(y = P21) +  
  geom_boxplot() +  
  aes(group = NIVEL_ED) +  
  aes(fill = NIVEL_ED) +  
  theme_minimal() +  
* labs(x = "Máximo nivel educativo alcanzado")
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g3_8-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
ggplot(data = base) +  
  aes(x = NIVEL_ED) +  
  aes(y = P21) +  
  geom_boxplot() +  
  aes(group = NIVEL_ED) +  
  aes(fill = NIVEL_ED) +  
  theme_minimal() +  
  labs(x = "Máximo nivel educativo alcanzado") +  
* labs(y = "Ingreso de la ocupación principal")
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g3_9-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
ggplot(data = base) +  
  aes(x = NIVEL_ED) +  
  aes(y = P21) +  
  geom_boxplot() +  
  aes(group = NIVEL_ED) +  
  aes(fill = NIVEL_ED) +  
  theme_minimal() +  
  labs(x = "Máximo nivel educativo alcanzado") +  
  labs(y = "Ingreso de la ocupación principal") +  
* labs(title = "Boxplot del Ingreso de la Ocupación Principal por máximo nivel de estudios alcanzado")
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g3_10-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
ggplot(data = base) +  
  aes(x = NIVEL_ED) +  
  aes(y = P21) +  
  geom_boxplot() +  
  aes(group = NIVEL_ED) +  
  aes(fill = NIVEL_ED) +  
  theme_minimal() +  
  labs(x = "Máximo nivel educativo alcanzado") +  
  labs(y = "Ingreso de la ocupación principal") +  
  labs(title = "Boxplot del Ingreso de la Ocupación Principal por máximo nivel de estudios alcanzado") +  
* labs(caption = "Fuente: Elaboración propia en base a EPH-INDEC")
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g3_11-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
ggplot(data = base) +  
  aes(x = NIVEL_ED) +  
  aes(y = P21) +  
  geom_boxplot() +  
  aes(group = NIVEL_ED) +  
  aes(fill = NIVEL_ED) +  
  theme_minimal() +  
  labs(x = "Máximo nivel educativo alcanzado") +  
  labs(y = "Ingreso de la ocupación principal") +  
  labs(title = "Boxplot del Ingreso de la Ocupación Principal por máximo nivel de estudios alcanzado") +  
  labs(caption = "Fuente: Elaboración propia en base a EPH-INDEC") +  
* scale_y_continuous(limits = c(0, 50000))
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g3_12-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
ggplot(data = base) +  
  aes(x = NIVEL_ED) +  
  aes(y = P21) +  
  geom_boxplot() +  
  aes(group = NIVEL_ED) +  
  aes(fill = NIVEL_ED) +  
  theme_minimal() +  
  labs(x = "Máximo nivel educativo alcanzado") +  
  labs(y = "Ingreso de la ocupación principal") +  
  labs(title = "Boxplot del Ingreso de la Ocupación Principal por máximo nivel de estudios alcanzado") +  
  labs(caption = "Fuente: Elaboración propia en base a EPH-INDEC") +  
  scale_y_continuous(limits = c(0, 50000)) +  
* coord_flip()
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g3_13-1.png" width="100%" /&gt;
]]


---
class: middle, center, inverse

## Gráficos de densidad

### Probemos con otro tipo de gráfico, que ayude a comparar mejor (que es nuestro objetivo)

---





class: split-40
count: false
.column[.content[

```r
*ggplot(data = base)
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g4_1-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
ggplot(data = base) +  
* aes(x = P21,weights = PONDIIO)
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g4_2-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
ggplot(data = base) +  
  aes(x = P21,weights = PONDIIO) +  
* geom_density()
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g4_3-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
ggplot(data = base) +  
  aes(x = P21,weights = PONDIIO) +  
  geom_density() +  
* aes(group = NIVEL_ED)
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g4_4-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
ggplot(data = base) +  
  aes(x = P21,weights = PONDIIO) +  
  geom_density() +  
  aes(group = NIVEL_ED) +  
* aes(color = NIVEL_ED)
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g4_5-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
ggplot(data = base) +  
  aes(x = P21,weights = PONDIIO) +  
  geom_density() +  
  aes(group = NIVEL_ED) +  
  aes(color = NIVEL_ED) +  
* theme_minimal()
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g4_6-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
ggplot(data = base) +  
  aes(x = P21,weights = PONDIIO) +  
  geom_density() +  
  aes(group = NIVEL_ED) +  
  aes(color = NIVEL_ED) +  
  theme_minimal() +  
* labs(x = "Ingreso de la ocupación principal")
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g4_7-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
ggplot(data = base) +  
  aes(x = P21,weights = PONDIIO) +  
  geom_density() +  
  aes(group = NIVEL_ED) +  
  aes(color = NIVEL_ED) +  
  theme_minimal() +  
  labs(x = "Ingreso de la ocupación principal") +  
* labs(title = "Ingreso de la Ocupación Principal por máximo nivel de estudios alcanzado")
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g4_8-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
ggplot(data = base) +  
  aes(x = P21,weights = PONDIIO) +  
  geom_density() +  
  aes(group = NIVEL_ED) +  
  aes(color = NIVEL_ED) +  
  theme_minimal() +  
  labs(x = "Ingreso de la ocupación principal") +  
  labs(title = "Ingreso de la Ocupación Principal por máximo nivel de estudios alcanzado") +  
* labs(caption = "Fuente: Elaboración propia en base a EPH-INDEC")
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g4_9-1.png" width="100%" /&gt;
]]


---
class: middle, center, inverse

## Gráficos de densidad

### Que hacemos si queremos comparar las distribuciones del ingreso por sexo, contemplando el nivel educativo como variable diferenciadora
  
---

Nuevamente, tenemos que editar primero una variable para poder trabajar con etiquetas. En este caso la variable de sexo:


```r
base &lt;- base %&gt;% 
  mutate(CH04 = factor(CH04,
                       levels = c(1, 2),
                       labels = c("Varón", "Mujer")))
table(base$CH04)
```

```
  
  Varón Mujer 
  10887  8468
```

---




class: split-40
count: false
.column[.content[

```r
*ggplot(data = base)
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g5_1-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
ggplot(data = base) +  
* aes(x = P21)
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g5_2-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
ggplot(data = base) +  
  aes(x = P21) +  
* geom_density()
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g5_3-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
ggplot(data = base) +  
  aes(x = P21) +  
  geom_density() +  
* aes(group = CH04)
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g5_4-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
ggplot(data = base) +  
  aes(x = P21) +  
  geom_density() +  
  aes(group = CH04) +  
* aes(color = CH04)
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g5_5-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
ggplot(data = base) +  
  aes(x = P21) +  
  geom_density() +  
  aes(group = CH04) +  
  aes(color = CH04) +  
* theme_minimal()
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g5_6-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
ggplot(data = base) +  
  aes(x = P21) +  
  geom_density() +  
  aes(group = CH04) +  
  aes(color = CH04) +  
  theme_minimal() +  
* labs(x = "Ingreso de la ocupación principal")
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g5_7-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
ggplot(data = base) +  
  aes(x = P21) +  
  geom_density() +  
  aes(group = CH04) +  
  aes(color = CH04) +  
  theme_minimal() +  
  labs(x = "Ingreso de la ocupación principal") +  
* labs(title = "Ingreso de la Ocupación Principal por Nivel educativo")
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g5_8-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
ggplot(data = base) +  
  aes(x = P21) +  
  geom_density() +  
  aes(group = CH04) +  
  aes(color = CH04) +  
  theme_minimal() +  
  labs(x = "Ingreso de la ocupación principal") +  
  labs(title = "Ingreso de la Ocupación Principal por Nivel educativo") +  
* labs(caption = "Fuente: Elaboración propia en base a EPH-INDEC")
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g5_9-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
ggplot(data = base) +  
  aes(x = P21) +  
  geom_density() +  
  aes(group = CH04) +  
  aes(color = CH04) +  
  theme_minimal() +  
  labs(x = "Ingreso de la ocupación principal") +  
  labs(title = "Ingreso de la Ocupación Principal por Nivel educativo") +  
  labs(caption = "Fuente: Elaboración propia en base a EPH-INDEC") +  
* facet_wrap(~ NIVEL_ED)
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g5_10-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
ggplot(data = base) +  
  aes(x = P21) +  
  geom_density() +  
  aes(group = CH04) +  
  aes(color = CH04) +  
  theme_minimal() +  
  labs(x = "Ingreso de la ocupación principal") +  
  labs(title = "Ingreso de la Ocupación Principal por Nivel educativo") +  
  labs(caption = "Fuente: Elaboración propia en base a EPH-INDEC") +  
  facet_wrap(~ NIVEL_ED) +  
* scale_x_continuous(limits = c(0, 50000))
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g5_11-1.png" width="100%" /&gt;
]]


---
class: middle, center, inverse

## Gráficos de Barras

### Ahora queremos conocer cómo se distribuye la población en función del máximo nivel educativo alcanzado

---

- Observemos un poco más sobre la variable con las herramientas que conocemos

```r
base %&gt;% 
  calculate_tabulates(x = "NIVEL_ED",
                      add.totals = "row",
                      add.percentage = "col",
                      weights = "PONDERA")
```

```
                NIVEL_ED   Freq
         Sin instruccion   0.4%
     Primaria incompleta   3.5%
       Primaria completa  14.7%
   Secundaria incompleta  16.9%
     Secundaria completa  27.9%
         Sup. incompleto  14.3%
           Sup. completo  22.2%
                   Total 100.0%
```

---

¿Y si la cruzamos por sexo?


```r
base %&gt;% 
  calculate_tabulates(x = "NIVEL_ED",
                      y = "CH04",
                      add.totals = "row",
                      add.percentage = "col",
                      weights = "PONDERA")
```

```
           NIVEL_ED/CH04  Varón  Mujer
         Sin instruccion   0.5%   0.4%
     Primaria incompleta   4.1%   2.8%
       Primaria completa  17.9%  10.8%
   Secundaria incompleta  19.8%  13.4%
     Secundaria completa  29.2%  26.4%
         Sup. incompleto  12.4%  16.7%
           Sup. completo  16.1%  29.6%
                   Total 100.0% 100.0%
```

---







class: split-40
count: false
.column[.content[

```r
*base
```
]]
.column[.content[

```
  # A tibble: 19,355 x 177
     CODUSU  ANO4 TRIMESTRE NRO_HOGAR COMPONENTE   H15 REGION MAS_500 AGLOMERADO
     &lt;fct&gt;  &lt;int&gt;     &lt;int&gt;     &lt;int&gt;      &lt;int&gt; &lt;int&gt;  &lt;int&gt; &lt;fct&gt;        &lt;int&gt;
   1 TQRMN~  2018         1         1          1     1     43 S                4
   2 TQRMN~  2018         1         1          1     1     43 S                4
   3 TQRMN~  2018         1         1          2     1     43 S                4
   4 TQRMN~  2018         1         1          1     1     43 S                4
   5 TQRMN~  2018         1         1          2     1     43 S                4
   6 TQRMN~  2018         1         1          1     1     43 S                4
   7 TQRMN~  2018         1         1          4     1     43 S                4
   8 TQSMN~  2018         1         1          1     1     43 S                2
   9 TQRMN~  2018         1         1          1     1     43 S                2
  10 TQRMN~  2018         1         1          1     1     43 S                2
  # ... with 19,345 more rows, and 168 more variables: PONDERA &lt;int&gt;, CH03 &lt;int&gt;,
  #   CH04 &lt;fct&gt;, CH05 &lt;fct&gt;, CH06 &lt;int&gt;, CH07 &lt;int&gt;, CH08 &lt;int&gt;, CH09 &lt;int&gt;,
  #   CH10 &lt;int&gt;, CH11 &lt;int&gt;, CH12 &lt;int&gt;, CH13 &lt;int&gt;, CH14 &lt;chr&gt;, CH15 &lt;int&gt;,
  #   CH15_COD &lt;int&gt;, CH16 &lt;int&gt;, CH16_COD &lt;int&gt;, NIVEL_ED &lt;fct&gt;, ESTADO &lt;int&gt;,
  #   CAT_OCUP &lt;int&gt;, CAT_INAC &lt;int&gt;, IMPUTA &lt;int&gt;, PP02C1 &lt;int&gt;, PP02C2 &lt;int&gt;,
  #   PP02C3 &lt;int&gt;, PP02C4 &lt;int&gt;, PP02C5 &lt;int&gt;, PP02C6 &lt;int&gt;, PP02C7 &lt;int&gt;,
  #   PP02C8 &lt;int&gt;, PP02E &lt;int&gt;, PP02H &lt;int&gt;, PP02I &lt;int&gt;, PP03C &lt;int&gt;,
  #   PP03D &lt;int&gt;, PP3E_TOT &lt;int&gt;, PP3F_TOT &lt;int&gt;, PP03G &lt;int&gt;, PP03H &lt;int&gt;,
  #   PP03I &lt;int&gt;, PP03J &lt;int&gt;, INTENSI &lt;int&gt;, PP04A &lt;int&gt;, PP04B_COD &lt;chr&gt;,
  #   PP04B1 &lt;int&gt;, PP04B2 &lt;int&gt;, PP04B3_MES &lt;int&gt;, PP04B3_ANO &lt;int&gt;,
  #   PP04B3_DIA &lt;int&gt;, PP04C &lt;int&gt;, PP04C99 &lt;int&gt;, PP04D_COD &lt;chr&gt;, PP04G &lt;int&gt;,
  #   PP05B2_MES &lt;int&gt;, PP05B2_ANO &lt;int&gt;, PP05B2_DIA &lt;int&gt;, PP05C_1 &lt;int&gt;,
  #   PP05C_2 &lt;int&gt;, PP05C_3 &lt;int&gt;, PP05E &lt;int&gt;, PP05F &lt;int&gt;, PP05H &lt;int&gt;,
  #   PP06A &lt;int&gt;, PP06C &lt;int&gt;, PP06D &lt;int&gt;, PP06E &lt;int&gt;, PP06H &lt;int&gt;,
  #   PP07A &lt;int&gt;, PP07C &lt;int&gt;, PP07D &lt;int&gt;, PP07E &lt;int&gt;, PP07F1 &lt;int&gt;,
  #   PP07F2 &lt;int&gt;, PP07F3 &lt;int&gt;, PP07F4 &lt;int&gt;, PP07F5 &lt;int&gt;, PP07G1 &lt;int&gt;,
  #   PP07G2 &lt;int&gt;, PP07G3 &lt;int&gt;, PP07G4 &lt;int&gt;, PP07G_59 &lt;int&gt;, PP07H &lt;int&gt;,
  #   PP07I &lt;int&gt;, PP07J &lt;int&gt;, PP07K &lt;int&gt;, PP08D1 &lt;int&gt;, PP08D4 &lt;int&gt;,
  #   PP08F1 &lt;int&gt;, PP08F2 &lt;int&gt;, PP08J1 &lt;int&gt;, PP08J2 &lt;int&gt;, PP08J3 &lt;int&gt;,
  #   PP09A &lt;int&gt;, PP09A_ESP &lt;fct&gt;, PP09B &lt;int&gt;, PP09C &lt;int&gt;, PP09C_ESP &lt;fct&gt;,
  #   PP10A &lt;int&gt;, PP10C &lt;int&gt;, PP10D &lt;int&gt;, ...
```
]]
---
class: split-40
count: false
.column[.content[

```r
base %&gt;%  
* select(NIVEL_ED, CH04, PONDERA)
```
]]
.column[.content[

```
  # A tibble: 19,355 x 3
     NIVEL_ED              CH04  PONDERA
     &lt;fct&gt;                 &lt;fct&gt;   &lt;int&gt;
   1 Primaria incompleta   Varón     886
   2 Sup. completo         Mujer     509
   3 Sup. incompleto       Mujer     509
   4 Secundaria incompleta Varón     674
   5 Sup. incompleto       Mujer     674
   6 Primaria incompleta   Varón     368
   7 Secundaria completa   Varón     368
   8 Secundaria completa   Mujer     573
   9 Sup. completo         Varón     546
  10 Secundaria completa   Varón    1060
  # ... with 19,345 more rows
```
]]
---
class: split-40
count: false
.column[.content[

```r
base %&gt;%  
  select(NIVEL_ED, CH04, PONDERA) %&gt;%  
* group_by(NIVEL_ED)
```
]]
.column[.content[

```
  # A tibble: 19,355 x 3
  # Groups:   NIVEL_ED [7]
     NIVEL_ED              CH04  PONDERA
     &lt;fct&gt;                 &lt;fct&gt;   &lt;int&gt;
   1 Primaria incompleta   Varón     886
   2 Sup. completo         Mujer     509
   3 Sup. incompleto       Mujer     509
   4 Secundaria incompleta Varón     674
   5 Sup. incompleto       Mujer     674
   6 Primaria incompleta   Varón     368
   7 Secundaria completa   Varón     368
   8 Secundaria completa   Mujer     573
   9 Sup. completo         Varón     546
  10 Secundaria completa   Varón    1060
  # ... with 19,345 more rows
```
]]
---
class: split-40
count: false
.column[.content[

```r
base %&gt;%  
  select(NIVEL_ED, CH04, PONDERA) %&gt;%  
  group_by(NIVEL_ED) %&gt;%  
* summarise(pob_tot = sum(PONDERA),
*           pob_varon   = sum(PONDERA[CH04 == "Varón"]),
*           pob_mujer   = sum(PONDERA[CH04 == "Mujer"]),
*           varon = pob_varon/pob_tot * 100,
*           mujer = pob_mujer/pob_tot * 100)
```
]]
.column[.content[

```
  # A tibble: 7 x 6
    NIVEL_ED              pob_tot pob_varon pob_mujer varon mujer
    &lt;fct&gt;                   &lt;int&gt;     &lt;int&gt;     &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;
  1 Sin instruccion         37282     22034     15248  59.1  40.9
  2 Primaria incompleta    304158    196399    107759  64.6  35.4
  3 Primaria completa     1275215    855946    419269  67.1  32.9
  4 Secundaria incompleta 1466621    945598    521023  64.5  35.5
  5 Secundaria completa   2419023   1391790   1027233  57.5  42.5
  6 Sup. incompleto       1241573    591015    650558  47.6  52.4
  7 Sup. completo         1920899    766282   1154617  39.9  60.1
```
]]
---
class: split-40
count: false
.column[.content[

```r
base %&gt;%  
  select(NIVEL_ED, CH04, PONDERA) %&gt;%  
  group_by(NIVEL_ED) %&gt;%  
  summarise(pob_tot = sum(PONDERA),  
            pob_varon   = sum(PONDERA[CH04 == "Varón"]),  
            pob_mujer   = sum(PONDERA[CH04 == "Mujer"]),  
            varon = pob_varon/pob_tot * 100,  
            mujer = pob_mujer/pob_tot * 100) %&gt;%  
* select(NIVEL_ED, mujer, varon)
```
]]
.column[.content[

```
  # A tibble: 7 x 3
    NIVEL_ED              mujer varon
    &lt;fct&gt;                 &lt;dbl&gt; &lt;dbl&gt;
  1 Sin instruccion        40.9  59.1
  2 Primaria incompleta    35.4  64.6
  3 Primaria completa      32.9  67.1
  4 Secundaria incompleta  35.5  64.5
  5 Secundaria completa    42.5  57.5
  6 Sup. incompleto        52.4  47.6
  7 Sup. completo          60.1  39.9
```
]]
---
class: split-40
count: false
.column[.content[

```r
base %&gt;%  
  select(NIVEL_ED, CH04, PONDERA) %&gt;%  
  group_by(NIVEL_ED) %&gt;%  
  summarise(pob_tot = sum(PONDERA),  
            pob_varon   = sum(PONDERA[CH04 == "Varón"]),  
            pob_mujer   = sum(PONDERA[CH04 == "Mujer"]),  
            varon = pob_varon/pob_tot * 100,  
            mujer = pob_mujer/pob_tot * 100) %&gt;%  
  select(NIVEL_ED, mujer, varon) %&gt;%  
* gather(key = sexo, value = valor, 2:3)
```
]]
.column[.content[

```
  # A tibble: 14 x 3
     NIVEL_ED              sexo  valor
     &lt;fct&gt;                 &lt;chr&gt; &lt;dbl&gt;
   1 Sin instruccion       mujer  40.9
   2 Primaria incompleta   mujer  35.4
   3 Primaria completa     mujer  32.9
   4 Secundaria incompleta mujer  35.5
   5 Secundaria completa   mujer  42.5
   6 Sup. incompleto       mujer  52.4
   7 Sup. completo         mujer  60.1
   8 Sin instruccion       varon  59.1
   9 Primaria incompleta   varon  64.6
  10 Primaria completa     varon  67.1
  11 Secundaria incompleta varon  64.5
  12 Secundaria completa   varon  57.5
  13 Sup. incompleto       varon  47.6
  14 Sup. completo         varon  39.9
```
]]


---


```r
ggplot(data = base_graf) +
  aes(x = NIVEL_ED, y = valor, fill = sexo) +
  geom_bar(stat = "identity")+
  coord_flip()
```

&lt;img src="Clase_5_Presentacion_files/figure-html/unnamed-chunk-18-1.png" width="55%" style="display: block; margin: auto;" /&gt;

---


```r
ggplot(data = base_graf) +
  aes(x = NIVEL_ED, y = valor, fill = sexo) +
  geom_bar(stat = "identity",
           position = position_dodge())+
  coord_flip()
```

&lt;img src="Clase_5_Presentacion_files/figure-html/unnamed-chunk-19-1.png" width="55%" style="display: block; margin: auto;" /&gt;

---


```r
ggplot(data = base_graf) +
  aes(x = NIVEL_ED, y = valor, fill = sexo) +
  geom_bar(stat = "identity",
           position = position_dodge(),
           color = "black")+
  coord_flip()
```

&lt;img src="Clase_5_Presentacion_files/figure-html/unnamed-chunk-20-1.png" width="55%" style="display: block; margin: auto;" /&gt;

---


```r
ggplot(data = base_graf) +
  aes(x = NIVEL_ED, y = valor, fill = sexo) +
  geom_bar(stat = "identity",
           position = position_dodge(),
           color = "black") +
  labs(title = "Máximo nivel de intrucción alcanzado por sexo",
       x = "Máximo nivel de instrucción alcanzado",
       y = "Porcentaje",
       caption = "Fuente: EPH - INDEC. Total Aglomerados, 1 trimestre de 2018.") +
  coord_flip()
```

&lt;img src="Clase_5_Presentacion_files/figure-html/unnamed-chunk-21-1.png" width="40%" style="display: block; margin: auto;" /&gt;

---
class: middle, center, inverse

## Gráficos de líneas

### Veamos la evolución en el tiempo del ingreso promedio de la ocupación principal

---

* Descarguemos las 4 bases de datos del año 2018 con la función del paquete _eph_. Que tiene el objeto que nos trae la función *get_microdata*? 


```r
bases2018 &lt;- get_microdata(year = 2018,
                      trimester = 1:4,
                      type = "individual") 

bases2018 
```

```
  # A tibble: 4 x 5
     year trimester wave  type       microdata              
    &lt;dbl&gt;     &lt;int&gt; &lt;lgl&gt; &lt;fct&gt;      &lt;list&gt;                 
  1  2018         1 NA    individual &lt;tibble [57,951 x 177]&gt;
  2  2018         2 NA    individual &lt;tibble [57,835 x 177]&gt;
  3  2018         3 NA    individual &lt;tibble [56,879 x 177]&gt;
  4  2018         4 NA    individual &lt;tibble [57,418 x 177]&gt;
```
--

El objeto es un _tibble_ de cuatro observaciones, y 5 variables. En la quinta variable están contenidos los dataframes propios a cada trimestre

---

* Seleccionamos unicamente la columna *microdata* y aplicamos la funcion **unnest** para apilar todos los dataframes en uno solo.


```r
bases2018.apiladas &lt;- bases2018 %&gt;%
    select(microdata) %&gt;%
    unnest(cols = c(microdata))

nrow(bases2018.apiladas)
```

```
  [1] 230083
```
--
Tenemos un objeto con más de 230.000 registros! 

---

* Calculemos el ingreso de la ocupación principal promedio por sexo en cada trimestre


```
  # A tibble: 8 x 4
  # Groups:   ANO4, TRIMESTRE [4]
     ANO4 TRIMESTRE CH04  ingreso.promedio
    &lt;int&gt;     &lt;int&gt; &lt;fct&gt;            &lt;dbl&gt;
  1  2018         1 Varón           17700.
  2  2018         1 Mujer           13294.
  3  2018         2 Varón           18195.
  4  2018         2 Mujer           13594.
  5  2018         3 Varón           19000.
  6  2018         3 Mujer           14288.
  7  2018         4 Varón           21198.
  8  2018         4 Mujer           15713.
```

class: split-40
count: false
.column[.content[

```r
*base.ingresos.prom &lt;- bases2018.apiladas %&gt;%
* filter(P21&gt;0)
```
]]
.column[.content[

]]
---
class: split-40
count: false
.column[.content[

```r
base.ingresos.prom &lt;- bases2018.apiladas %&gt;%  
  filter(P21&gt;0) %&gt;%  
* mutate(CH04 = factor(CH04,levels = c(1, 2),labels = c("Varón", "Mujer")))
```
]]
.column[.content[

]]
---
class: split-40
count: false
.column[.content[

```r
base.ingresos.prom &lt;- bases2018.apiladas %&gt;%  
  filter(P21&gt;0) %&gt;%  
  mutate(CH04 = factor(CH04,levels = c(1, 2),labels = c("Varón", "Mujer"))) %&gt;%  
* group_by(ANO4,TRIMESTRE,CH04)
```
]]
.column[.content[

]]
---
class: split-40
count: false
.column[.content[

```r
base.ingresos.prom &lt;- bases2018.apiladas %&gt;%  
  filter(P21&gt;0) %&gt;%  
  mutate(CH04 = factor(CH04,levels = c(1, 2),labels = c("Varón", "Mujer"))) %&gt;%  
  group_by(ANO4,TRIMESTRE,CH04) %&gt;%  
* summarise(ingreso.promedio=weighted.mean(P21,PONDIIO))
```
]]
.column[.content[

]]
---
class: split-40
count: false
.column[.content[

```r
base.ingresos.prom &lt;- bases2018.apiladas %&gt;%  
  filter(P21&gt;0) %&gt;%  
  mutate(CH04 = factor(CH04,levels = c(1, 2),labels = c("Varón", "Mujer"))) %&gt;%  
  group_by(ANO4,TRIMESTRE,CH04) %&gt;%  
  summarise(ingreso.promedio=weighted.mean(P21,PONDIIO))  
*base.ingresos.prom
```
]]
.column[.content[

```
  # A tibble: 8 x 4
  # Groups:   ANO4, TRIMESTRE [4]
     ANO4 TRIMESTRE CH04  ingreso.promedio
    &lt;int&gt;     &lt;int&gt; &lt;fct&gt;            &lt;dbl&gt;
  1  2018         1 Varón           17700.
  2  2018         1 Mujer           13294.
  3  2018         2 Varón           18195.
  4  2018         2 Mujer           13594.
  5  2018         3 Varón           19000.
  6  2018         3 Mujer           14288.
  7  2018         4 Varón           21198.
  8  2018         4 Mujer           15713.
```
]]
---
class: split-40
count: false
.column[.content[

```r
base.ingresos.prom &lt;- bases2018.apiladas %&gt;%  
  filter(P21&gt;0) %&gt;%  
  mutate(CH04 = factor(CH04,levels = c(1, 2),labels = c("Varón", "Mujer"))) %&gt;%  
  group_by(ANO4,TRIMESTRE,CH04) %&gt;%  
  summarise(ingreso.promedio=weighted.mean(P21,PONDIIO))  
base.ingresos.prom  
```
]]
.column[.content[

```
  # A tibble: 8 x 4
  # Groups:   ANO4, TRIMESTRE [4]
     ANO4 TRIMESTRE CH04  ingreso.promedio
    &lt;int&gt;     &lt;int&gt; &lt;fct&gt;            &lt;dbl&gt;
  1  2018         1 Varón           17700.
  2  2018         1 Mujer           13294.
  3  2018         2 Varón           18195.
  4  2018         2 Mujer           13594.
  5  2018         3 Varón           19000.
  6  2018         3 Mujer           14288.
  7  2018         4 Varón           21198.
  8  2018         4 Mujer           15713.
```
]]

---



class: split-40
count: false
.column[.content[

```r
*base.ingresos.prom
```
]]
.column[.content[

```
  # A tibble: 8 x 4
  # Groups:   ANO4, TRIMESTRE [4]
     ANO4 TRIMESTRE CH04  ingreso.promedio
    &lt;int&gt;     &lt;int&gt; &lt;fct&gt;            &lt;dbl&gt;
  1  2018         1 Varón           17700.
  2  2018         1 Mujer           13294.
  3  2018         2 Varón           18195.
  4  2018         2 Mujer           13594.
  5  2018         3 Varón           19000.
  6  2018         3 Mujer           14288.
  7  2018         4 Varón           21198.
  8  2018         4 Mujer           15713.
```
]]
---
class: split-40
count: false
.column[.content[

```r
base.ingresos.prom %&gt;%  
*ggplot()
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g6_2-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
base.ingresos.prom %&gt;%  
ggplot() +  
* aes(x = TRIMESTRE,
*     y = ingreso.promedio,
*     group = CH04,
*     color = CH04)
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g6_6-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
base.ingresos.prom %&gt;%  
ggplot() +  
  aes(x = TRIMESTRE,  
      y = ingreso.promedio,  
      group = CH04,  
      color = CH04) +  
* geom_line()
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g6_7-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
base.ingresos.prom %&gt;%  
ggplot() +  
  aes(x = TRIMESTRE,  
      y = ingreso.promedio,  
      group = CH04,  
      color = CH04) +  
  geom_line() +  
* geom_point()
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g6_8-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
base.ingresos.prom %&gt;%  
ggplot() +  
  aes(x = TRIMESTRE,  
      y = ingreso.promedio,  
      group = CH04,  
      color = CH04) +  
  geom_line() +  
  geom_point() +  
* theme_minimal()
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g6_9-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
base.ingresos.prom %&gt;%  
ggplot() +  
  aes(x = TRIMESTRE,  
      y = ingreso.promedio,  
      group = CH04,  
      color = CH04) +  
  geom_line() +  
  geom_point() +  
  theme_minimal() +  
* labs(x = "Trimestre")
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g6_10-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
base.ingresos.prom %&gt;%  
ggplot() +  
  aes(x = TRIMESTRE,  
      y = ingreso.promedio,  
      group = CH04,  
      color = CH04) +  
  geom_line() +  
  geom_point() +  
  theme_minimal() +  
  labs(x = "Trimestre") +  
* labs(y = "Ingreso de la ocupación principal")
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g6_11-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
base.ingresos.prom %&gt;%  
ggplot() +  
  aes(x = TRIMESTRE,  
      y = ingreso.promedio,  
      group = CH04,  
      color = CH04) +  
  geom_line() +  
  geom_point() +  
  theme_minimal() +  
  labs(x = "Trimestre") +  
  labs(y = "Ingreso de la ocupación principal") +  
* labs(title = "Ingreso de la Ocupación Principal promedio por Sexo. Año 2018")
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g6_12-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
base.ingresos.prom %&gt;%  
ggplot() +  
  aes(x = TRIMESTRE,  
      y = ingreso.promedio,  
      group = CH04,  
      color = CH04) +  
  geom_line() +  
  geom_point() +  
  theme_minimal() +  
  labs(x = "Trimestre") +  
  labs(y = "Ingreso de la ocupación principal") +  
  labs(title = "Ingreso de la Ocupación Principal promedio por Sexo. Año 2018") +  
* labs(caption = "Fuente: Elaboración propia en base a EPH-INDEC")
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g6_13-1.png" width="100%" /&gt;
]]

---

* Como se relaciona la variable *P21* con el resto de variables de la base? La función **ggpairs** del paquete *GGaly nos permite una mirada rápida de la interacción entre las variables de nuestra base (seleccionamos algunas)


```r
base %&gt;% 
  select(P21,EDAD = CH06,SEXO = CH04,NIVEL_ED) %&gt;% 
ggpairs(mapping = aes(color = SEXO))+
  theme(axis.text.x = element_text(angle = 45))
```

class: split-40
count: false
.column[.content[

```r
*base
```
]]
.column[.content[

```
  # A tibble: 19,355 x 177
     CODUSU  ANO4 TRIMESTRE NRO_HOGAR COMPONENTE   H15 REGION MAS_500 AGLOMERADO
     &lt;fct&gt;  &lt;int&gt;     &lt;int&gt;     &lt;int&gt;      &lt;int&gt; &lt;int&gt;  &lt;int&gt; &lt;fct&gt;        &lt;int&gt;
   1 TQRMN~  2018         1         1          1     1     43 S                4
   2 TQRMN~  2018         1         1          1     1     43 S                4
   3 TQRMN~  2018         1         1          2     1     43 S                4
   4 TQRMN~  2018         1         1          1     1     43 S                4
   5 TQRMN~  2018         1         1          2     1     43 S                4
   6 TQRMN~  2018         1         1          1     1     43 S                4
   7 TQRMN~  2018         1         1          4     1     43 S                4
   8 TQSMN~  2018         1         1          1     1     43 S                2
   9 TQRMN~  2018         1         1          1     1     43 S                2
  10 TQRMN~  2018         1         1          1     1     43 S                2
  # ... with 19,345 more rows, and 168 more variables: PONDERA &lt;int&gt;, CH03 &lt;int&gt;,
  #   CH04 &lt;fct&gt;, CH05 &lt;fct&gt;, CH06 &lt;int&gt;, CH07 &lt;int&gt;, CH08 &lt;int&gt;, CH09 &lt;int&gt;,
  #   CH10 &lt;int&gt;, CH11 &lt;int&gt;, CH12 &lt;int&gt;, CH13 &lt;int&gt;, CH14 &lt;chr&gt;, CH15 &lt;int&gt;,
  #   CH15_COD &lt;int&gt;, CH16 &lt;int&gt;, CH16_COD &lt;int&gt;, NIVEL_ED &lt;fct&gt;, ESTADO &lt;int&gt;,
  #   CAT_OCUP &lt;int&gt;, CAT_INAC &lt;int&gt;, IMPUTA &lt;int&gt;, PP02C1 &lt;int&gt;, PP02C2 &lt;int&gt;,
  #   PP02C3 &lt;int&gt;, PP02C4 &lt;int&gt;, PP02C5 &lt;int&gt;, PP02C6 &lt;int&gt;, PP02C7 &lt;int&gt;,
  #   PP02C8 &lt;int&gt;, PP02E &lt;int&gt;, PP02H &lt;int&gt;, PP02I &lt;int&gt;, PP03C &lt;int&gt;,
  #   PP03D &lt;int&gt;, PP3E_TOT &lt;int&gt;, PP3F_TOT &lt;int&gt;, PP03G &lt;int&gt;, PP03H &lt;int&gt;,
  #   PP03I &lt;int&gt;, PP03J &lt;int&gt;, INTENSI &lt;int&gt;, PP04A &lt;int&gt;, PP04B_COD &lt;chr&gt;,
  #   PP04B1 &lt;int&gt;, PP04B2 &lt;int&gt;, PP04B3_MES &lt;int&gt;, PP04B3_ANO &lt;int&gt;,
  #   PP04B3_DIA &lt;int&gt;, PP04C &lt;int&gt;, PP04C99 &lt;int&gt;, PP04D_COD &lt;chr&gt;, PP04G &lt;int&gt;,
  #   PP05B2_MES &lt;int&gt;, PP05B2_ANO &lt;int&gt;, PP05B2_DIA &lt;int&gt;, PP05C_1 &lt;int&gt;,
  #   PP05C_2 &lt;int&gt;, PP05C_3 &lt;int&gt;, PP05E &lt;int&gt;, PP05F &lt;int&gt;, PP05H &lt;int&gt;,
  #   PP06A &lt;int&gt;, PP06C &lt;int&gt;, PP06D &lt;int&gt;, PP06E &lt;int&gt;, PP06H &lt;int&gt;,
  #   PP07A &lt;int&gt;, PP07C &lt;int&gt;, PP07D &lt;int&gt;, PP07E &lt;int&gt;, PP07F1 &lt;int&gt;,
  #   PP07F2 &lt;int&gt;, PP07F3 &lt;int&gt;, PP07F4 &lt;int&gt;, PP07F5 &lt;int&gt;, PP07G1 &lt;int&gt;,
  #   PP07G2 &lt;int&gt;, PP07G3 &lt;int&gt;, PP07G4 &lt;int&gt;, PP07G_59 &lt;int&gt;, PP07H &lt;int&gt;,
  #   PP07I &lt;int&gt;, PP07J &lt;int&gt;, PP07K &lt;int&gt;, PP08D1 &lt;int&gt;, PP08D4 &lt;int&gt;,
  #   PP08F1 &lt;int&gt;, PP08F2 &lt;int&gt;, PP08J1 &lt;int&gt;, PP08J2 &lt;int&gt;, PP08J3 &lt;int&gt;,
  #   PP09A &lt;int&gt;, PP09A_ESP &lt;fct&gt;, PP09B &lt;int&gt;, PP09C &lt;int&gt;, PP09C_ESP &lt;fct&gt;,
  #   PP10A &lt;int&gt;, PP10C &lt;int&gt;, PP10D &lt;int&gt;, ...
```
]]
---
class: split-40
count: false
.column[.content[

```r
base %&gt;%  
* select(P21,EDAD = CH06,SEXO = CH04,NIVEL_ED)
```
]]
.column[.content[

```
  # A tibble: 19,355 x 4
       P21  EDAD SEXO  NIVEL_ED             
     &lt;int&gt; &lt;int&gt; &lt;fct&gt; &lt;fct&gt;                
   1 10000    62 Varón Primaria incompleta  
   2 17000    28 Mujer Sup. completo        
   3 18000    27 Mujer Sup. incompleto      
   4  5000    46 Varón Secundaria incompleta
   5 10000    47 Mujer Sup. incompleto      
   6 15000    53 Varón Primaria incompleta  
   7 15000    22 Varón Secundaria completa  
   8  9000    55 Mujer Secundaria completa  
   9 20000    64 Varón Sup. completo        
  10  6000    27 Varón Secundaria completa  
  # ... with 19,345 more rows
```
]]
---
class: split-40
count: false
.column[.content[

```r
base %&gt;%  
  select(P21,EDAD = CH06,SEXO = CH04,NIVEL_ED) %&gt;%  
*ggpairs(mapping = aes(color = SEXO))
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g7_3-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false
.column[.content[

```r
base %&gt;%  
  select(P21,EDAD = CH06,SEXO = CH04,NIVEL_ED) %&gt;%  
ggpairs(mapping = aes(color = SEXO))+  
* theme(axis.text.x = element_text(angle = 45))
```
]]
.column[.content[
&lt;img src="Clase_5_Presentacion_files/figure-html/output_g7_4-1.png" width="100%" /&gt;
]]
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightLines": true,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  /* Replace <script> tags in slides area to make them executable
   *
   * Runs after post-processing of markdown source into slides and replaces only
   * <script>s on the last slide of continued slides using the .has-continuation
   * class added by xaringan. Finally, any <script>s in the slides area that
   * aren't executed are commented out.
   */
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container:not(.has-continuation) script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
  var scriptsNotExecuted = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container.has-continuation script'
  );
  if (!scriptsNotExecuted.length) return;
  for (var i = 0; i < scriptsNotExecuted.length; i++) {
    var comment = document.createComment(scriptsNotExecuted[i].outerHTML)
    scriptsNotExecuted[i].parentElement.replaceChild(comment, scriptsNotExecuted[i])
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
